---
title: 索引新数据
date: 2022-04-13 19:29:02
permalink: /pages/d11a1b/
categories:
  - Elasticsearch
  - 深入功能
tags:
  - 
author: 
  name: 樊光瑞
  link: https://github.com/maoHuanZhe
---
尽管第 3 章会深入索引的细节，这里的目标是让你感受一下，索引是什么。这一章将讨论如下处理方法。

- 使用`cURL`和`REST API`，发送`JSON`文档让`Elasticsearch`进行索引。你将看到返回的`JSON`应答。
- 如果索引~~和类型~~尚不存在时，`Elasticsearch`是如何自动地创建文档所属的索引~~和类型~~。
- 通过本书的源码索引额外的文档，这样你就可以拥有一个用于搜索的数据集。

::: note 更新内容
在 Elasticsearch 6.0.0 或更高版本中创建的索引可能只包含一个映射类型。在 5.x 中创建的具有多种映射类型的索引将继续像以前一样在 Elasticsearch 6.x 中发挥作用。类型将在 Elasticsearch 7.0.0 的 API 中被弃用，并在 8.0.0 中完全删除。

[原文地址](https://www.elastic.co/guide/en/elasticsearch/reference/6.0/removal-of-types.html)

:::

你将手动索引第一篇文档，一开始先来看看如何向某个URI发送HTTP PUT 请求。URI的样例如下所示，每个部分都有标注。首先过一遍如何发送这个请求。

http://localhost:9200/get-together/_doc/1



## 索引一篇文档

```http
PUT /get-together/_doc/1
{
  "name":"Elasticsearch Denver",
  "organizer": "Lee"
}
```
应该获得如下输出
```json
{
  "_index" : "get-together",
  "_id" : "1",
  "_version" : 1,
  "result" : "created",
  "_shards" : {
    "total" : 2,
    "successful" : 1,
    "failed" : 0
  },
  "_seq_no" : 0,
  "_primary_term" : 1
}
```
## 创建索引和映射
### 手动创建索引
```
PUT /new-index
```
应获得如下输出
```
{
  "acknowledged" : true,
  "shards_acknowledged" : true,
  "index" : "new-index"
}
```
### 获取映射
```
GET /get-together/_mapping
```
应获得如下输出
```
{
  "get-together" : {
    "mappings" : {
      "properties" : {
        "name" : {
          "type" : "text",
          "fields" : {
            "keyword" : {
              "type" : "keyword",
              "ignore_above" : 256
            }
          }
        },
        "organizer" : {
          "type" : "text",
          "fields" : {
            "keyword" : {
              "type" : "keyword",
              "ignore_above" : 256
            }
          }
        }
      }
    }
  }
}
```
## 通过样例代码索引数据