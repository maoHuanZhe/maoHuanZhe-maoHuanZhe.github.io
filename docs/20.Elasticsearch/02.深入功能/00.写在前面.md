---
title: 写在前面
date: 2022-04-17 19:50:28
permalink: /pages/8b6f99/
categories:
  - Elasticsearch
  - 深入功能
tags:
  - 
author: 
  name: 樊光瑞
  link: https://github.com/maoHuanZhe
---
::: tip 本章主要内容 

- 定义文档、类型和索引
- 理解 `Elastiesearch` 节点、主分片和副本分片
- 通过 `cURL` 和一个数据集来索引文档
- 搜索和检索数据
- 设置 `Elasticsearch` 配置选项
- 在多个节点上工作

:::

现在你知道 `Elasticscarch` 是何种搜索引擎，在第 1 章中也看到了它的一些主要特性。接下来让我们进入实践，看看它是如何完成它所擅长的。假想你接受了一项任务，需要创造一种方法，在数百万的文档中进行搜索。例如，一个允许人们构建共同兴趣组并进行聚会（get-together）的网站。你需要以容错的方式来实现，而且随着站点越来越成功，搭建的系统要能够容纳更多的数据和并发的搜索。

本章将通过 `Elasticsearch` 数据组织的解释，来展示如何处理这种场景。然后，你将使用本章的代码样例，在聚会网站的真实数据上实践索引和搜索。

所有的操作通过 `cURL` 完成，这是一个小而美的命令行工具，为 `HTTP` 请求而设计。稍后，如果需要，可以将`cURL` 所完成的内容翻译成你喜欢的编程语言。本章的最后将修改配置文件，并启动新的 `Elasticsearch` 实例，这样就可以在多节点的集群上进行实验。

我们从数据的组织开始。为了理解 `Elasticscarch` 中数据是如何组织的，从以下两个角度来观察。

- 逻辑设计——搜索应用所要注意的。用于索引和搜索的基本单位是文档，可以将其认为是关系数据库里的一行。文档以**索引**来分组，**索引**包含若千文档，类似表格包含若干行。
- 物理设计——在后台 `Elasticsearch` 是如何处理数据的。`Elasticsearch`将每个索引划分为`分片`，每份分片可以在集群中的不同服务器间迁移。通常，应用程序无须关心这些，因为无论 `Elasticsearch` 是单台还是多台服务器，应用和 `Elasticsearch` 的交互基本保持不变。但是，开始管理集群的时候，就需要留心了。原因是，物理设计的配置方式决定了集群的性能、可扩展性和可用性。

图 2-1 展示了这两个方面。

::: center

![image](https://cdn.jsdelivr.net/gh/maoHuanZhe/image@main/20220413/image.1gwi93f3lcg0.webp)

图 2-1 从应用和管理者视角分别看 Elasticsearch 集群

:::

让我们先从逻辑设计开始，即应用程序的视角。