一开始的时候，仅仅以二元的方式来考虑文档和查询的匹配可能也是有意义的，也就是“是的，匹配了”或“不，没有匹配”。尽管如此，考虑文档的相关性(relevancy）匹配可能是更加合理的。在用户可以说出一个文档是否匹配（二元方式）之前，如果能够说出对于某个查询而言，文档 A 比文档 B 更优，那么就更为精确了。例如，当使用最喜欢的搜索引擎来搜索 “elasticsearch"的时候，如果系统告诉你一个特定的页面因为包含这个词条而命中，那么这一点是远远不够的。相反地，你希望结果是根据最佳相关性来排序的。

确定文档和查询有多么相关的过程被称为打分（scoring）。尽管精确地理解 Elasticsearch 是如何计算文档得分这一点并不是必需的，但是对于如何使用 Elasticsearch 而言，它仍然是非常有帮助的。

## 文档打分是如何运作的

Lucene(以及其扩展 Elasticsearch）的打分机制是一个公式，将考量的文档作为输入，使用不同的因素来确定该文档的得分。我们先讨论每个因素，然后通过这个公式将它们综合，来更好地解释整体的得分。正如之前所提，我们希望更为相关的文档被优先返回，在Lucene 和 Elasticscarch 中这种相关性被称为得分。

在开始计算得分之时，Elasticsearch 使用了被搜索词条的频率以及它有多常见来影响得分。一个简短的解释是，一个词条出现在某个文档中的次数越多，它就越相关。但是，如果该词条出现在不同的文档的次数越多，它就越不相关。这一点被称为 TF-IDF（TF 是词频，即 term frequency)，IDF 是逆文档频率( inverse document frequency )，现在我们将深入讨论每种类型的频率。

## 词频

