---
title: 为任务选择最好的查询
date: 2022-04-19 20:28:35
permalink: /pages/7e6836/
categories:
  - Elasticsearch
  - 搜索数据
tags:
  - 
author: 
  name: 樊光瑞
  link: https://github.com/maoHuanZhe
---

1

现在我们已经讨论了一些最为主流的 `Elasticsearch` 查询，下面来看看如何确定使用哪些查询，以及何时使用。没有绝对和快速的规则告诉你对于何种任务使用何种查询，表 4-3 会帮助你抉择常用案例中使用哪些查询。

::: center 

表 4-3 常用案例中使用哪些类型的查询

| 用例                                                         | 使用的查询类型                                               |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 你想从类似 `Google` 的界面接受用户的输入，然后根据这些输入搜素文档 | 如果想支特`+` `/` `-` 或者在特定字段中搜索，就使用 `match`查询 simple_ `query_string` 查询 |
| 你想将输入作为词组并搜索包含这个词组的文档，词组中的单词间也许包含一些间隔 (`slop`) | 要查找和用户搜索相似的词组，使用 `match_phrase`查询，并设置一定量的 `slop` |
| 你想在没被分析的字段中搜索单个的关键词，并完全清楚这个词应该是如何出现的 | 使用 `term` 查询，因为查询的词条不会被分析                   |
| 你希望组合许多不同的搜索请求或者不同类型的搜索，创建一个单独的搜索来处理它们 | 使用 `bool` 查询，将任意数量的子查询组合到一个单独的查询     |
| 你希望在某个文档中的多个字段搜索特定的单词                   | 使用 `multi_match` 查询,它和 `match` 查询的表现类似，不过是在多个字段上搜索 |
| 你希望通过一次搜索返回所有的文档                             | 使用 `match_all` 查询，在一次搜索中返回全部文档              |
| 你希望在字段中搜索一定取值范围内的值                         | 使用 `range` 查询，搜索取值在一定范围内的文档                |
| 你希望在字段中搜索以特定字符串开头的取值                     | 使用 `prefix` 在询，搜索以给定字符串开头的词条               |
| 你希望根据用户己经输入的内容，提供单个关健词的自动完成功能   | 使用 `prefix` 查询，发送用户己经输入的内容，然后获取以此文本开头的匹配项 |
| 你希望搜索特定字段有取值的所有文档                           | 使用 `exists` 过滤器出含有某些字段的文档                     |

:::





