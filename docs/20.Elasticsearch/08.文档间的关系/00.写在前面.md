---
title: 写在前面
date: 2022-04-19 20:35:31
permalink: /pages/09a226/
categories:
  - Elasticsearch
  - 文档间的关系
tags:
  - 
author: 
  name: 樊光瑞
  link: https://github.com/maoHuanZhe
---
::: tips 本章主要内容
- 对象和对象数组
- 嵌套映射、查询和过滤器
- 父映射、`has_parent` 和 `has_child` 查询和过滤器
- 反规范化(`denormalization`)技术
:::
有些数据天生就是有关联的。例如，在我们全书使用的 `get-together` 站点上，人们按照兴趣是否相同组成了多个分组，而活动又是根据分组来组织的。根据特定主题，你将如何搜索哪些分组举办了相关的活动？
如果数据是扁平的结构，那么你可以跳过本章，进人到第 9 章所讨论的扩展性话题。日志数据通常是这种情況，字段之间是相互独立的，如时间戳、严重程度和消息。另一方面，如果数据中有相关联的实体，如博客帖和评论、用户和产品等，那么你可能就会好奇，如何最好地表示文档之间的关系，以便针对这些关系来运行查询和聚集。
有了 `Elasticsearch`，就不必像 `SQL` 数据库 那样进行连接（`join`）操作。正如 8.4 节所讨论的`反规范化`（复制数据），那样做的原因是，在分布式系统中进行查询时的连接操作通常是很缓慢的，而 `Elasticsearch` 试图成为实时性的系统，并在毫秒级返回查询的结果。整体来看，在`Elasticsearch` 中有多种方法来定义关系。比如，可以根据位置来搜索活动，或者根据活动的属性来搜索分组。我们将探索所有的可能性，来定义 `Elasticsearch` 文档间的关系----对象类型、嵌套文档、父子关系和反规范化，本章也会研究每项的优缺点。