---
title: 小结
date: 2022-04-13 19:32:42
permalink: /pages/283ec9/
categories:
  - Elasticsearch
tags:
  - Elasticsearch
  - 索引、更新和删除
author: 
  name: 樊光瑞
  link: https://github.com/maoHuanZhe
---

在继续学习之前，看看本章中所探讨的内容。

- 映射定义了文档中的字段，以及这些字段是如何被索引的。我们说 `Elasticsearch` 是无须模式（`schema`）的，因为映射是自动扩展的，不过在实际生产中，需要经常控制哪些被索引，哪些被存储，以及如何存储。
- 文档中的多数字段是**常用**类型，如**文本**和数值。这些字段的索引方式对于 `Elasticscarch`的表现以及搜索结果的相关性有着很大的影响。例如，第 5 章介绍的分析设置。
- 单一字段也可以包含多个字段或取值。我们了解了数组和多字段，它们让你在单一字段中拥有同一**常用**类型的多个实例。
- 除了用于文档的字段，`Elasticsearch` 还提供了预定义的字段，如`_source` 和`_version`。配置这些字段将修改某些你并没有显式提供给文档的数据，但是对于性能和功能都有很大影响。
- 由于 `Elasticsearch` 在 `Lucene` 分段里存储数据，而分段一旦创建就不会修改，因此更新文档意味着检索现存的文档，将修改放入即将索引的新文档中，然后删除旧的索引。
- 当 `Lucene` 分段异步合并时，就会移除待删的文档。这也是为什么删除整个索引要比删除单个或多个文档要快——索引删除只是意味着移除磁盘上的文件，而且无须合并。
- 在索引、更新和删除过程中，可以使用文档版本来管理并发问题。对于更新而言，如果因为并发问题而导致更新失败了，可以告诉 `Elasticsearch` 自动重试。
