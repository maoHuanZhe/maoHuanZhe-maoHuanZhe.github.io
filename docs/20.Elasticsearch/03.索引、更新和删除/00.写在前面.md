---
title: 写在前面
date: 2022-04-17 19:50:28
permalink: /pages/a9dd80/
categories:
  - Elasticsearch
tags:
  - Elasticsearch
  - 索引、更新和删除
author: 
  name: 樊光瑞
  link: https://github.com/maoHuanZhe
---
::: tip 本章主要内容 

- 可以在映射中使用的不同字段类型
- 使用预定义的字段及其选项
- 上述这些如何帮助数据的索引、更新和删除

:::

本章内容是关于如何在 `Elasticsearch` 中存入和获取数据，并且维护这些数据：索引、更新和删除文档。在第 1 章中，你了解到 `Elasticsearch` 是`基于文档`的，而文档是由字段和其值组成的，这些使得文档是自我完备的，就好像一张数据表中有行和列一样。在第2章中，你看到可以通过`Elasticscarch` 的 `REST API` 来索引一篇文档。这里，我们将观察文档中的字段以及它们所包含的内容，来深入理解索引过程的细节。例如，当索引一篇这样的文档时：

```json
{"name": "Elasticsearch Denver"}
```

由于 `Elasticsearch Denver` 是一个字符串，所以 `name` 字段是**文本**类型。其他的字段可能是数值型、布尔型等。本章将介绍以下 3种类型的字段。

- 核心——这些字段包括字符串和数值型。
- 数组和多元字段——这些字段在某个字段中存在相同核心类型的多个值。例如，`tags` 字段可以拥有多个标签。
- 预定义——

可以认为这些字段是元数据，`Elasticsearch` 会自动地管理它们，提供更多额外的功能。举例来说，可以配置 `Elasticsearch`，让其自动地将新数据加入文档集合( 如时间戳）。

已经知道了文档中可以有的字段类型，以及如何索引这些字段，现在我们将看看如何更新己经存在的文档。鉴于存储数据的方式，当 `Elasticsearch` 更新现存文档的时候，它会检索出这篇文档，然后按照需求进行修改。然后 `Elasticsearch` 再次索引更改后的文档，并删除相应的旧文档。这些更新操作会引起并发问题，你将看到如何通过文档版本自动地解决这些问题。你还将看到删除文档的不同方法，某些方法比其他的运行速度更快。`Elasticsearch` 索引使用的主要程序库是 `Apache Lucene`，`Lucene` 在磁盘上存储数据的特殊方法又导致了这些差异。

先从索引开始，看看如何管理文档中的字段。你已经在第 2 章中了解到字段是在映射中定义的．所以在深入理解如何操作每种**索引**的字段之前，先来了解大体上如何操作映射。