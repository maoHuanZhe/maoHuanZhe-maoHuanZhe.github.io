---
title: 合并请求
date: 2022-04-19 20:50:57
permalink: /pages/83d623/
categories:
  - Elasticsearch
  - 提升性能
tags:
  - 
author: 
  name: 樊光瑞
  link: https://github.com/maoHuanZhe
---
```
POST /_bulk
{"index":{"_index":"get-together","_id":"10"}}
{"name":"Elastcsearch Bucharest"}
{"index":{"_index":"get-together","_id":"11"}}
{"name":"Big DAta Bucharest"}
```
```
POST /get-together/_bulk
{"index":{}}
{"name":"Elasticsearch Bucharest"}
{"index":{}}
{"name":"Big Data Bucharest"}
{
  "took" : 43,
  "errors" : false,
  "items" : [
    {
      "index" : {
        "_index" : "get-together",
        "_id" : "0AyoToABfFQLtETFnp-C",
        "_version" : 1,
        "result" : "created",
        "_shards" : {
          "total" : 2,
          "successful" : 2,
          "failed" : 0
        },
        "_seq_no" : 4,
        "_primary_term" : 2,
        "status" : 201
      }
    },
    {
      "index" : {
        "_index" : "get-together",
        "_id" : "0QyoToABfFQLtETFnp-C",
        "_version" : 1,
        "result" : "created",
        "_shards" : {
          "total" : 2,
          "successful" : 2,
          "failed" : 0
        },
        "_seq_no" : 5,
        "_primary_term" : 2,
        "status" : 201
      }
    }
  ]
}

```

```
POST /get-together/_bulk
{"index":{}}
{"title":"Elasticsearch Bucharest"}
{"create":{}}
{"title":"Big Data in romania"}
{"update":{"_id":"11"}}
{"doc":{"created_on":"2014-05-06"}}
{"delete":{"_id":"10"}}
{
  "took" : 80,
  "errors" : false,
  "items" : [
    {
      "index" : {
        "_index" : "get-together",
        "_id" : "0gytToABfFQLtETF1J-h",
        "_version" : 1,
        "result" : "created",
        "_shards" : {
          "total" : 2,
          "successful" : 2,
          "failed" : 0
        },
        "_seq_no" : 18,
        "_primary_term" : 2,
        "status" : 201
      }
    },
    {
      "create" : {
        "_index" : "get-together",
        "_id" : "0wytToABfFQLtETF1J-h",
        "_version" : 1,
        "result" : "created",
        "_shards" : {
          "total" : 2,
          "successful" : 2,
          "failed" : 0
        },
        "_seq_no" : 19,
        "_primary_term" : 2,
        "status" : 201
      }
    },
    {
      "update" : {
        "_index" : "get-together",
        "_id" : "11",
        "_version" : 2,
        "result" : "updated",
        "_shards" : {
          "total" : 2,
          "successful" : 2,
          "failed" : 0
        },
        "_seq_no" : 20,
        "_primary_term" : 2,
        "status" : 200
      }
    },
    {
      "delete" : {
        "_index" : "get-together",
        "_id" : "10",
        "_version" : 2,
        "result" : "deleted",
        "_shards" : {
          "total" : 2,
          "successful" : 2,
          "failed" : 0
        },
        "_seq_no" : 21,
        "_primary_term" : 2,
        "status" : 200
      }
    }
  ]
}

```
```
POST _msearch
{"index":"get-together"}
{ "query": {"match":{"name":"elasticsearch"}}}
{"index":"get-together"}
{ "query": {"match":{"title":"elasticsearch"}}}
{
  "took" : 61,
  "responses" : [
    {
      "took" : 26,
      "timed_out" : false,
      "_shards" : {
        "total" : 2,
        "successful" : 2,
        "skipped" : 0,
        "failed" : 0
      },
      "hits" : {
        "total" : {
          "value" : 3,
          "relation" : "eq"
        },
        "max_score" : 1.2048764,
        "hits" : [
          {
            "_index" : "get-together",
            "_id" : "0AyoToABfFQLtETFnp-C",
            "_score" : 1.2048764,
            "_source" : {
              "name" : "Elasticsearch Bucharest"
            }
          }
        ]
      },
      "status" : 200
    },
    {
      "took" : 61,
      "timed_out" : false,
      "_shards" : {
        "total" : 2,
        "successful" : 2,
        "skipped" : 0,
        "failed" : 0
      },
      "hits" : {
        "total" : {
          "value" : 8,
          "relation" : "eq"
        },
        "max_score" : 0.72042507,
        "hits" : [
          {
            "_index" : "get-together",
            "_id" : "0gytToABfFQLtETF1J-h",
            "_score" : 0.72042507,
            "_source" : {
              "title" : "Elasticsearch Bucharest"
            }
          }
        ]
      },
      "status" : 200
    }
  ]
}

```

```
GET /_mget
{
  "docs":[
    {"_index":"get-gogether","_id":"1"},
    {"_index":"get-gogether","_id":"2"}
  ]
}
{
  "docs" : [
    {
      "_index" : "get-gogether",
      "_id" : "1",
      "error" : {
        "root_cause" : [
          {
            "type" : "index_not_found_exception",
            "reason" : "no such index [get-gogether]",
            "resource.type" : "index_expression",
            "resource.id" : "get-gogether",
            "index_uuid" : "_na_",
            "index" : "get-gogether"
          }
        ],
        "type" : "index_not_found_exception",
        "reason" : "no such index [get-gogether]",
        "resource.type" : "index_expression",
        "resource.id" : "get-gogether",
        "index_uuid" : "_na_",
        "index" : "get-gogether"
      }
    },
    {
      "_index" : "get-gogether",
      "_id" : "2",
      "error" : {
        "root_cause" : [
          {
            "type" : "index_not_found_exception",
            "reason" : "no such index [get-gogether]",
            "resource.type" : "index_expression",
            "resource.id" : "get-gogether",
            "index_uuid" : "_na_",
            "index" : "get-gogether"
          }
        ],
        "type" : "index_not_found_exception",
        "reason" : "no such index [get-gogether]",
        "resource.type" : "index_expression",
        "resource.id" : "get-gogether",
        "index_uuid" : "_na_",
        "index" : "get-gogether"
      }
    }
  ]
}

```
```
GET /get-together/_mget
{
  "ids":[1,2]
}
```